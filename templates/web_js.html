<!DOCTYPE html>
<head>
    <title>web</title>
    <!-- <link rel="stylesheet" type="text/css" href="../static/styles/webstyles.css">  -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/webstyles.css')}}"> 
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.9.0/dist/tf.min.js"></script>
    <!-- <script src = "../static/heic2any.js"></script> -->
   <script src="{{ url_for('static', filename='heic2any.js')}}"> </script>
</head>

<body>

    <div >
        <form method = "GET", action="/solve">
        <table class = "tablegrid">
            <tr>
                <td class="lu" ><input name = "00"></td>
                <td class="u"> <input name = "01" > </td>
                <td class="u"><input  name = "02"></td>
                <td class="lu"><input  name = "03"></td>
                <td class="u"><input  name = "04" ></td>
                <td class="u"><input  name = "05"></td>
                <td class="lu"><input name = "06" ></td>
                <td class="u"><input  name = "07"  ></td>
                <td class="ur"><input name = "08"></td>
            </tr>
            <tr>
                <td class="l"><input name = "10" ></td>
                <td><input name = "11" ></td>
                <td class="r"><input name = "12" ></td>
                <td><input name = "13" ></td>
                <td><input name = "14"  ></td>
                <td class="r"><input name = "15" ></td>
                <td><input name = "16" ></td>
                <td><input name = "17" ></td>
                <td class="r"><input name = "18" ></td>
         </tr>

            <tr>
 
                <td class="l"><input name = "20" ></td>
                <td><input name = "21" ></td>
                <td class="r"><input name = "22" ></td>
                <td><input name = "23" ></td>
                <td><input  name = "24"></td>
                <td class="r"><input name = "25" ></td>
                <td><input name = "26" ></td>
                <td><input name = "27" ></td>
                <td class="r"><input name = "28" ></td>
            </tr>

            <tr>
                <td class="lu"><input name="30"></td>
                <td class="u"><input name="31" ></td>
                <td class="u"><input name="32" ></td>
                <td class="lu"><input name="33" ></td>
                <td class="u"><input  name="34"></td>
                <td class="u"><input name="35" ></td>
                <td class="lu"><input name="36" ></td>
                <td class="u"><input name="37" ></td>
                <td class="ur"><input  name="38"></td>
            </tr>

            <tr>
                <td class="l"><input name="40" ></td>
                <td><input name="41" ></td>
                <td class="r"><input name="42" ></td>
                <td><input name="43" ></td>
                <td><input name="44" ></td>
                <td class="r"><input name="45" ></td>
                <td><input name="46" ></td>
                <td><input name="47" ></td>
                <td class="r"><input name="48" ></td>
            </tr>

            <tr>
                <td class="l"><input name="50" ></td>
                <td><input name="51" ></td>
                <td class="r"><input name="52" ></td>
                <td><input name="53" ></td>
                <td><input name="54" ></td>
                <td class="r"><input name="55" ></td>
                <td><input name="56" ></td>
                <td><input name="57" ></td>
                <td class="r"><input name="58" ></td>
            </tr>

            <tr>
                <td class="lu"><input name="60" ></td>
                <td class="u"><input name="61" ></td>
                <td class="u"><input  name="62"></td>
                <td class="lu"><input name="63" ></td>
                <td class="u"><input name="64" ></td>
                <td class="u"><input  name="65"></td>
                <td class="lu"><input name="66" ></td>
                <td class="u"><input name="67" ></td>
                <td class="ur"><input name="68" ></td>
            </tr>

            <tr>
                <td class="l"><input name = "70" ></td>
                <td><input name = "71" ></td>
                <td class="r"><input name = "72" ></td>
                <td><input name = "73" ></td>
                <td><input name = "74" ></td>
                <td class="r"><input name = "75" ></td>
                <td><input name = "76" ></td>
                <td><input name = "77" ></td>
                <td class="r"><input name = "78" ></td>
            </tr>

            <tr>
                <td class="bl"><input  name = "80"></td>
                <td class="b"><input name = "81" ></td>
                <td class="b"><input name = "82" ></td>
                <td class="bl"><input name = "83" ></td>
                <td class="b"><input name = "84" ></td>
                <td class="b"><input name = "85" ></td>
                <td class="bl"><input name = "86" ></td>
                <td class="b"><input name = "87" ></td>
                <td class="br"><input name = "88" ></td>
            </tr>
        
        
        </table>
    <div style ="text-align: center;">
        <button type="submit" class="sbutton" id="solve">Solve</button>
    </div>
    </form>
    </div>


<p id="debugc">Debugger...</p>
<p id="bit">Wait...</p>
<form method="POST" action="/upload" enctype="multipart/form-data">
  <p><input type="file" style="height: auto;width: auto;" id="file_upload" name="file"></p>
</form>
<script src="{{url_for('static', filename='main.js')}}"></script>
<!-- <script src = "../static/main.js"></script> -->


<li class="licanv"><p style="margin: 4px;">Original Photo:</p>
    <canvas style="border: 5px solid black " id="canvas"  >
    <img id ="display">
    </canvas>
</li>

<li class="licanv">
    <p style="margin: 4px;"> Output photo:</p>
    <canvas style="border: 5px solid black "  id="canvas2"  >
        <img id ="display">
    </canvas>
</li>

<p class = "explain">Explanation of the photo input:</p>
<p style="margin-left: 10px;" class="explain">
    The first step is grayscaling the image because the
    addition of color is unnecessary and can make it harder for the model
    to predict the pattern. Also, if the image is large (4k image) then it is resized.
    <br><br>The processed image goes to the first model which locates where the grid is in the photo. The output photo will be the part of the original image that is thought to soley contain the sudoku board.
    <br><br>The part of the image that contains the sudoku board goes to a second model to predict where each cell is on the image. The two parts are necessary as in the background of the original image there could be something that looks like it could belong on the sudoku board, but does not actually. Both models use object detection, which means it predicts a bounding box around where it thinks the object is located. In the output image there will be red boxes around each grid. Also, the boxes are sorted by their coordnites. The upper-left most cell will have one of the nine highest upper value, and out of the nine highest it has the left most coordnite, so it is the upper-most coordnite. This strategy sorts the boxes. 
    <br><br>
    The third and final step is predicting the digit in each box. This part uses a classification model. Afterwards, the predictions are displayed on the sudoku grid, and are ready to solve. 
</p>
<br><br><br><br>

<p class = "explain">Explanation of the solver:</p>
<p style="margin-left: 10px;" class="explain">
    The solver uses a combination of inferences, along with a backtrack search algortihim if no inferences can be made. The inferences are basic, and mostly serve to help the search algorithim avoid picking a value that would break the rules of the sudoku puzzle. The search algorithim guesses the cell with the least number of options. So if it is known that one of the cells can only be a 1 or a 7, that guess will be made on that cell.  
</p>

<p class = "explain">The code used to run this webpage along with code for solving the sudoku puzzle can be found on me github below:</p>
<p style="margin-left: 10px;" class="explain">
    <a link href= "https://github.com/mkaufmann84/sudoku_web">Source Code
    </a>



</body>
